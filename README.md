## Загрузчик для STM32F103
Для обновления прошивки на STM32 без программатора по любому удобному протоколу необходим кастомный загрузчик (бутлоадер). 
Это отдельная программа, которая располагается в самом начале FLASH-памяти контроллера по адресу 0x08000000. 
Проект для бутлоадера создаётся обыкновенным образом, например в STM32CubeIDE. 
Единственное что нужно изменить - в файле линкер-скрипта (STM32F103C8TX_FLASH.ld) указать необходимый размер флеша под загрузчик. 
Определить необходимый размер можно просто. Компилируем, и если выдаёт ошибку линковки, значит нужно увеличить размер. 
Адрес оставляем без изменения, а менять нужно последнее число в строке:
`FLASH (rx) : ORIGIN = 0x8000000, LENGTH = 16K` 
Для моего загрузчика хватило 16 кБ. Считаю, что это довльно много для контроллера с памятью 64 кБ. В дальнейшем перепишу загрузчик без HAL.
Посмотрим сколько удастся сэкономить.

Репозиторий с тестовой прошивкой для проверки загрузчика.
https://github.com/otlichnik97/test-app-for-bootloader
Сначала прошиваем в МК загрузчик с помощью ST-Link. А затем специальной программой загружаем тестовую прошивку. Загружать нужно .bin файл.
Ссылку на программу приложу позже.
